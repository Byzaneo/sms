sudo: required
language: java
jdk: oraclejdk10
services:
- docker
cache:
  directories:
  - "$HOME/.m2/repository"
before_install:
- git clone https://sources.byzaneo.com/scm/one/travis.git target
install:
- mvn package -U -B -P prod,coverage --settings target/maven/settings.xml
after_success:
- bash <(curl -s https://codecov.io/bash)
- docker login -u $BYZANEO_USERNAME -p $BYZANEO_PASSWORD repository.byzaneo.com
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- export IMAGE_NAME=repository.byzaneo.com/sms
- docker build -t $IMAGE_NAME:$COMMIT .
- docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:$TAG
- docker push $IMAGE_NAME
env:
- secure: Isg/sVA9afyJOULXQIx/c76QC8CTgDHOxcO5FCDtkO/aHBOXCtyvbkIsGmzbw5TOvV8Oh0+HWdwQGlm5nFFAHSCuUx+1yh/RYD6avAmf/r1lqqoPtzLS80Sxx/YrrS+dnO7i15zkkuOE++oWMWhkggDw4yTAYJNHxnX/W4Y/rGyPL4yej3g2p2EFfs3kX1Lgfi75aKudzAbklLuHYpIaJ+M4ckszGwzkoIdL03jNYDWEvZNxV8IWwyL3f26cpJbAjeuVNyeIt96/UI57ELWF2T7364GpiINUa6oU4Rq83NLyLpc6jdd7hXYW104mibzFKhfiFPXKsqCKmuaY4ulpXpM1IW5O5LtoQko2dNZhqKostdvYXQME/q2dWPzvc05f/KXns7hNbuF3sCDyHDQD9gnaoRSrz8eLDr+TKBk1E4rvLm5D1qzrIVZ1P97keI6OTOD13LBxa9PYhW8OdK/tAF5VTcGauKVmQ14UKj8cLjCE3akrl9LJns44/6Vxml4zXBvD0C2ODFsPekozbYoa7Wk64Mbkpxq4/6Q6DwnhN+1yVvlw7m+3OzCPs1mxGH/avywMEBVBXJMMofPb4rquf93wGSnUJyxSrDulhuiAZqEg4T2sVtYSVTU4j+a80RAI2HycH5WtMn11EXOJspn2KiM2H22qJEBjsFCE12j/67E=
- secure: eEpQOlPCgwHnbJcBKRNzU5pnXSALm+Qv348BkVjLc6d3RT/kmP0px0KkbK7mf6tw14hhnQiCqtXfQGGg0HolWkeIeEHwot492x2etLoy3FLakINws8IPjK1FKG3AohfrVkjvtCk7n5O3oUjd0MSprcN104O1gNizM9Y0YAqp1d4tf28Vwc2BFK3nGy7asFXk4uN4jLEZRdB7QwzCjDzD0tVoq9L+SBWjwYn9E0l5a+p/hTIj80bcR8ZkyXrJACH62rpaX74FhT4+CtDtYrMXeBJkPCmSD7822ThyTsJhJcKyMcv8kVcYB6SgquwvB5QOftfQXF2dNXg7h3kBeiwSX51LCASrgVTO8nRq/TmmTAPFp57GWLtJkc8fJNVqtveAnSwX4GEzWyWO0fAZd0dBRyTU4estgRYdqdZQcdHF7fsfNTG8YCNNVQD/z1oeD9C1MkyjAJo3v3tai3wBmr5Lmgau5aAHfxfWBc+//53ypHd1wTF+7AQt6Rj8Rei4dSYQHbqmy92WPVVUvSwXVwA71TDEc1XJ+lXBG7OT8Kd1I0OcGB+yXzBDk8+heJcEUho1LVLKnDpPaKqGXU2bLop3Q4LCo/d5VyRzTkAKff/PAkjRgHW/4mAw8mk25TZkB8MhR2uDxrPc8cYEBj2GBpy7lBHQ8GKSMHGEcJ2M1h7Kxxg=
- secure: HGtEH7rwV6VuW+Ikw5zghwNC307fLz+Tty+DpnDQB51/A5CHYNZQAf1RHzC9kX0QdRvscjOJV8BNbL7qkSs2iYugFTiYiJxkyxwyVIbyPN7JC/vGxObDCGCoOo5F+HfOWjTPL5ags8J9FRAnhxz0y8A638er3uQtIndo9KkoGhShCS2ZdJ2iIclGok9Mhp5gn7kKdOBdZQXPuBM/DcTsZ49u+Tk36kHoXFdQyGsnr0d1I5cPT/4pfeb/Yzpt856qjIkW1WqLMuFXhnFZlOBGozNc7QvAsvdcsmd7g6Zl2ZTIAVQmACnpFlQ9PcjZI7iA7enZ5JDtqeNm1JQpLl6Rr6H9ko+6ddJCUjwOfmmWi9QzG4PZ55gVPjaSp52CuORN5hxfyHH4Q2YbjLxHq0wtcfEqn6TqtedF+XpgHlmPsZw/oz6E1wiv4/OwE9Ye4QkSLY4YjbzZZiy69482Ax0WYcW0P/1WDeZUvsy7f03ptLbu2YMY8o1ivQC1zOLDr6NsoR+bBuilpqgECpxcpT2MEhX5FM6+9kVDm1uk0yfLeK7T9gfceh6QgTOk+Z2xPV78+42xjHDeteRO+zBvlNkN71s55IFEtNqV8IJfzBe8pjGAcy4TiOQH0o9OX265HBlmiceDPUAoESjKfcL3v7a1HupUNIjgWSLZAY08yNxUqYg=
- secure: uoDxua+r8AC7f4VqZyJcRzsAnPGd2fSHceOBnFtrBy7/J6Idrnw3Z+tqJdgZdghWGcTbQOmAqGdcsSQeDzsNSCQqH7EsH8QyvUXDkhB1ZYp4OgtVYGDDVC4/C1HPkS8wa49b+kXT0+wkNeaFzumc3AT8nhMZ6oy4b04SB3WrpKVYVpJNI/JmeQyp9vMsgTx+Wih+Fr496wSEX4AITEOSJ/TozopjGTyfHs63cavDFkKnT9dF5qrgHTVIhUI5g+KMYHlNx3vyl570gSlujg5uUH53Gh8LJXkYfrK/pg6BRb9xetBjZlCzKFZUnmanaRYfaVLOEo5eikdC6SeG8/3GoxenA1Wx0C2+/jEEmmHKrq82tJfCgw/tHxtKe2TCR053ei84uSlL6t5jroqfr3AKEOIz81aS6c61p4S56g2TNdGVZt70KAWGWuRfJFsyjITt1R76AatwiK6yW2qb8QRisO60boq3oLXSM6aF6mte5VrVxo5DLZglNEvIpRFbZWA5n1pr8CxWGp+mFhpZZU077ED7QbYkJJp7IEXKSzNKVqhikZ061P8vHgMPffyx712/+fruc8NfrIhfRDq8benH2qdOlC8A2rMFaa7gK3GePvb7sUPuG97HqRSRqmsEkVAxP6d9vMWV9baKxY0I/VsgreDbxryUZwhPQiKqpBfXDcI=
- secure: AsYcrNLNBIdrqdOH1IK5icsKn6x4MJdcS7U1Ln6lGRiK4O25lapmz5qg6HAGUSRgx5CQn5gfP2Kcf5fXOuuE136a4V0UiZPNw31Rislt2TRqmwU43XsR3GeKkNx9Iz8yBKw5gF5CyYbtibq21yCOcWSXMW+ni4gaEmkUHLDWspN/2oghPNme8tASbetEoT8zidztAz1IQCOBQM/1ssFMS5SGBRP8YfeqO+K/xG0CPodnm9zlG4xS5x9ba3MWu3kAJuNpdFipPSXXqxuvUAShjkRPj1BhVtmr/Hp2AIHMDUs2QcA/UVq0Da0uGVDqlGrcmZdzryxPNSj107LrQw2LII8oMGuI9InHMcf/72FRLdr9Tr9nCge2FpKl77C20cAOTkAjOxVTsCX4cHuL5jzL6XxkMlRa64D1/RYA//DR+QXxm9oH2ii2JgxYtukhmmz9Fg8trLqnf2lPc6ZMpPZYhwbSQs9ZbpvVJQT/9WfVassrUI6HnK86bgAK/6EmmgTc4sW9x4ZPnfXpIYv+24qqSn7fNN07IyM5ydV6SM8pilivSeirrGMolkkIlXKoJU2HoiNGJa+TzGPvtWoki3sK9lyTbfPKX5S8Z/wgzLqaDC6zAYsbKSq9e7A+8Ww0xYi+8A4cS9jaG7faS5DcgEpJs3q4W/9jzFyZ/EIjjzY1UsE=
