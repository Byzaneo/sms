sudo: required
language: java
jdk: oraclejdk10
services:
- docker
cache:
  directories:
  - "$HOME/.m2/repository"
before_install:
- git clone https://sources.byzaneo.com/scm/one/travis.git target
install:
- env
- echo $SMS_ACCOUNT_SID
- echo $SMS_AUTH_TOKEN
- echo $SMS_SERVICE_SID
- echo $BYZANEO_USERNAME
- echo $BYZANEO_PASSWORD
- mvn package -U -B -P prod,coverage --settings target/maven/settings.xml
after_success:
- bash <(curl -s https://codecov.io/bash)
- docker login -u $BYZANEO_USERNAME -p $BYZANEO_PASSWORD repository.byzaneo.com
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- export IMAGE_NAME=repository.byzaneo.com/sms
- docker build -t $IMAGE_NAME:$COMMIT .
- docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:$TAG
- docker push $IMAGE_NAME
env:
  global:
  - secure: pfjJgILsrwwzPQGhx67CaIRH6rFjx9KTqKbFM1me9LUJQCfxPMUk9/e8apIYUmqzLaKt+AgTY0XpjHKQ6+sml1n/hz+DHcemt/Bj7lCQrwQyLzkiwdvvxxdvNCNYgSzogTSSj/eZYoChE+SSlbbRFiG7vZT4TaMMeWnOsDQErxggDm0QSwmAnZAZyzdy8jo3iX9+zEcr+BVwRI6Azg0q7uE7LwcBY4TUk3Wzjox25IE+dU7AmLWaMiMmih7iIiYYBvE+cNARYvT8MZnysLdu4Ctf298h5QjCux0iP/C5zm2H7UowNaAgmb9lGH+m+YIY974ldL9Wcsps8Zcob8HEZyHYfEhDJXHM8J6qpii4UpFGww8sjyNGEUiX/VRirrORQDzVXFnuIfaYrpkDEKmdJb5zgf/paIpwQu1T5pYWbhO8igIw571wcSWcERT3Q3QEVoYsfHXNmURORVUiDN4aPmQnANtbw373QFbYsffH1cLtU0KKYzjcWbkdSlwOobLIF392fb4/m2CT2MZy/jNKP0FYpbc767z0itfnAwrq745Fnh+TET8fN2k72nN/rLnVxsNYQxmEB9Ogr2cNREVouaG11lVtdXCnj+C1585jIRrVpk8Q6gtxq5te+o4oQ61lphIPVerherrAjg3y+p3nUU0O22Bf5z5UnmdAooRvclo=
  - secure: WZMXSfrVCDOxSe7FzCddCyMAuN5W0mVtYi4LVMomPl2OqALnWBj5X9S8UnfGGinL2mMXCvguFY/rXka46vUdthCat4ATvlHeXiDNat0pgyWdSU8m6nmQDz1f/gHB6GG6PAdjpULif88bFJu/rWVloXWagfbV7G7WBi6aus+ruAz88nIYKf6dMkAgEtOA4mMqIyMwDlxuS5lQTsnRnAP7bpCtPG0c+Rlhglg9gUZhZ/0d+hNih0Dd913VBe12SGLkKmBFhs+8A29yab/ogFQqJ9XdQfuQ1aUkdYIBFpaaahKySooWvGvFRt/xNwictsyYPKcdbPzSvovN3RviFeGlpy5WGlzT6/Q6pI9BCfkXsD3GnX8IPE2elXQqu/KqDg2fu3UB7c9rOytaY/b1ne4VoqWjMjRsfEx6AlSXFuYPAn96DrIaTx/zGdd7poElol9JxYgVz5YO+k3vtglZHmLU0VrB/l85w5U/7nxN3w64ufYJ6rb8W1Mw/rKME528tt+YMDd5bwXGWYFGBBfc75eOXqUl/omaNFAlRjEP2Fy+xvb2c3IakdldijYQ5AFvjP06LfmeNk0wyfoNWcVKv/tG+pMLhV+U8llX6OaHnKjO84sPeZVdYf4ZuqZGN8T58Fl58AkTvUEjwwL+dlvDfAMPLC+8PwW8jU2/zW5XMSwH188=
  - secure: KYhGbIbFUR+bk0Uu0XxIFwF2hXkr2N8ema1uRBVfR5wv7j2dNpSMqf4ccvAzxhkhXhC7JBEcWdTpD48Vh3M+m+IikKJGBSS2ODAy0fVsuqLrzsCpKk3oObBLpIegxqgmGolQCvc6z7/NdJ2e55pV8rS9tDyN3vfY4dT68w3fTMmSOJkFCaTD060tKKuXmRy25RE89EhIzBAO6HPr+xWZt2C+630Xv6ECdu58gpL5cXfwMyRLuYSNwIQTzLLyRXaVZHa7WNFigqs1U4DW6u7lln8G9Xw0m6RgruyRHrJVwY8tpM/ISAdAT6z2ZjU21/crcwzmNwl6DCmPA8aY93x+aNgckDKJIhQ7NHkexpZBNOJi9JTdbkD8UboyACDeq0sptbgpGZXGppSCyJ137Efmn+NvYqD2RdoNz/2QPtMap6Q+rFJv/etUBXhVue1/V0GBWwP/xPc482j6PQaaqW2p94v/lUDFfP5E9MPR9dEdj3vxWsik805ZXoFLta1dLTF4Uojl4bTx/DvUnIIIoUh00NtaFdxI5XyeT/fmsEsjrWUvntGrUiWzx4739Qyd9iI0ZxeeEJzYV8p8Jt+FyOUuBksILgNk2WlesH+JKaLdKR3vwD10sxJ6W5AaQI1At2T2zzUF31JCuswDr7tte0NTCM85Jx4ynTp4Y5qgkzPJjVE=
  - secure: d4jzk/gdE5Qm+WdV9TCXNbxZvnLa2esdk3Ry76xl2JhJ5n7NU1/b7BBQrLCxrfI9v4iOstCmld98hjbA50ZkGrNAGLaZ7wOuZD0FnqbkDmkjQxnN15wOeW+EB0Yu2zBYQv1tAHyFGdKtueVQUKuNvZmcYZPeDBMYpO8eXwRaQXpLVtRzkAfs+uv1z1of5tCiBAudiCPBhNYJuc02ERALKn+xVn8+oQDoJma5/7vJ9+N8L5a0+865meoKTgExgXO0XA1zuRESxcfiaD4H4KP1UUY3f4h/HOOzEy4Ur5/61WoSF3Zm+rXRPcEpK2TKI6XfMxA8EL6SHn3yZy//VC61nb4BcJxS6K6ZS6Kh3WIKSAJKH6aZBOOqMrQVZDNeOeclfcBwF2g9uwkDTlGAGN5YC/o8muMX0TfG5nNRo/Ya8Fo/4pJBy723RZN98OytST+qXmugATKu+lClkNTnfceDXGP2VxnZmNteYGS88ViwZwcwHqmFvoF3p4MNP990ktnvuKCe7LspQf/ews7QqVuzFjAFO6Fkq1ozUzSaOaUmPsV7rvEXIOcBlXU75oUH2y8DBL01DPYq0o0YCSdO0lu1X2QEREWzP2YKhlG29ICcSz64swb0JSXkyVmO6U3MIEhVVHZV7oo5SS7G9MuzYmfZwSvXXtOFXy5aM8bllRceQNc=
  - secure: ve8Z30RHkW/giUkWYNYmfcyUQr6Mn8ohgGTqWRXbQoEb3VfeqXDYF+c/TlehjoWnzcsW4rsaqmwLcp9IcPHopNc4txglwlkLBJBi5TpbgyIpRa9AYzbhgWsWoJ2qJgk4LM2m6Etrqg7ZdEDUuIbE/nhLq/MfJ6ImReRXNKivoByu/qXkM7b9m/lN9EcxkrjObwf6q5bNXgKLmdxmgI9uTXPFMRlhoRZ33FtnUVy9VuSe7TjQou6MDO8BUqZMFe2kCSyOw9+4G3sWIWcTAhp25uzYCdsuhl4Kd/DnR2xWxMDH2niuEaqzANEbF7buv+3zoa15i1n2I/2HFEux2GV7WTqgoJg7tMnfR6dcTroIGCj317uilMhzF9m8E4W2wik8bG0UPv6vuRBn41eHFfx1apHKI81e9zEteG298UMncoVpjmTjDOlyC3+3M3FIBZcRD24dpDojSPH6IssHpcdXjll8SSwGAZIcOf/lCaxlWQyetCPW2Hex6ddx/t7tfcrEB41rAZVJCs6NcPmB3XoaXVUkMlCHMEqnAiM4U2ngiqIjwOrWYP3sRpwHnC0CdVK9qWducqUvKJ8S2FOEKmBeFp8kR2ypQtp/IoBSkf8Vkjkfd4tw0UsPolkHKxRVjrDt2bJDggmjGAkK8jubWSKQ7BjWfUXt+urwk5e0R7N2VUo=
