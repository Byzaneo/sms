sudo: required
language: java
jdk: oraclejdk10
services:
  - docker
cache:
  directories:
    - "$HOME/.m2/repository"
before_install:
  - git clone https://sources.byzaneo.com/scm/one/travis.git target
install:
  - env
  - echo $SMS_ACCOUNT_SID
  - echo $SMS_AUTH_TOKEN
  - echo $SMS_SERVICE_SID
  - echo $BYZANEO_USERNAME
  - echo $BYZANEO_PASSWORD
  - mvn package -U -B -P prod,coverage --settings target/maven/settings.xml
after_success:
  - bash <(curl -s https://codecov.io/bash)
  - docker login -u $BYZANEO_USERNAME -p $BYZANEO_PASSWORD repository.byzaneo.com
  - export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
    fi`
  - export IMAGE_NAME=repository.byzaneo.com/sms
  - docker build -t $IMAGE_NAME:$COMMIT .
  - docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:$TAG
  - docker push $IMAGE_NAME
env:
  global:
    - secure: DY32f7kKZqNO9vB+inbzoMDoNU6GcHICZ3PAm9xe5z4OUsHHt/sdRFVpWbRKEFZF7J+cguvwxK7InjsE7fXq3/krLKRZShTPeUBRFZIsoVI37kM6GMrUH/tIfvA+0jK3hL17KkmTLL6dyubwukQ+rQurK4DkrN5llco1WQPy8ey5Eh9Pd9xBTh1qCKKT09/e3JzZ7mr7w/BrV1hHot6evkzwrPb/viWHEnI2SNyDlCDpW3/eMr9PdY193CPWt+mYXS75m/n6Rd2fFuUK1cvOAuLWa6PccL8khuDwWPvPmou9MxIvQbkhSTuWIyt3QJl+q40aHJ7hBeek3O5tignxXNdP+LsCSwuYjA03SL0uZUweFV6uEycLP03kTmnWCqxFi3dFFt5h8BufVu/zLLcre9KYR2CJ3CA2clG3IcR+g6FG8Tl3NaLp+bcZPCsZ4xFubgHCcapsWwWQ4loNrdQednZPgZbEri95H/INxu5pyCCv2rQpBHTfabjtZQtK5JI4+DhYY4TmITWLOwod9llw7vhMGP/2GvLcpHqePG3UwIi1Mht024f5IOLCbwuneOzigGMUjQgm0UZGZ1oQo/4tJMf13LZ1UzXecxjLUDHf+Gh8dEZGdUBdPNTQMpUYdhnGZDPfcwaeGBi+7vCWFhR+AjDdQ/23VoH1XU4zlcGR06I=
    - secure: m9YK94SKe11v8FlLNdiMPAzwhqPFd2BdNrTlpfKUDV+QVyda/8Zbn+yxQvmxYZES3nFjocynBwm/cSwaIAIgenKikW1lkWyBMVGkB109BjGk9HFRqrik/hZZqkbtC5k/cNRuHaoN7cQvIuV91ZVUcM12eIlQSb25ZLLRO6Y+6EVE9NsnpZL4K+fP0HZA/zuU3DjutAeK3mH9iCGVuwiDG0OO/eSe0XoOUyTQ9+67cItR1QvrY1SjeY1MW0JrwBDU4g4KKbW83RxoSfFEtH6px9Em9Tg8ARcKiH+Ikss9wHA52AmlcdDIOFpMaa5uImJd7aux3daNy545+SDx4bzQ5kINYzrb96Upag23yifSgZMPHbLdFJhcKMs1mGCQXnLfYVRVFt10WNbbhAXA69mBIW04cZJAwIZv9LEzXQGZoGaDtY7+ouoSK3PgES+AD/Js5jB+fvn89okP/g2L5sYntMtQXW12iNh6gEyybeVDk6w0419WfW3yomisFzOazo+fbtFhzxvssJgQA3BfEZs/MfjevyVFJ3f5/V9wINeufNtN0QA5vfLTnJQTOWbI2HB2vNpslq4+2RHHu5xvj4Z04ekX1YbyKxyIFw+mNwV5SS3s1BT+AXf6vkUN52geS5bRPM+VyzP+hGiQlhQlEre/8B5EISryAipS6ZnXcMVJiH8=
    - secure: rC8ulljVZ25B5rdQfw9BdS6SFHhKgPt9gDnj8LRLJyN5+ptZSGcrjCLxzLX1AkEEqVJS5fXuQH6iG7KRFP9TOxokJn4veiJpjTckHKlVz0RpU3259WXYJAhpZWAfUkPjgp5FgIPfnV/+bmbaomsskgMKwSaGff7qhB23P+Tq9DmvHdZ7rPlKs13hT8+IWsqZqqMdK5NX8NSpJ+CHlOv/TvpI+Ouy/mtHuutPzRW5emTTTWZq2FfSAFe3cBx/UGHFvClPObuIbc+s3cWzatXxyMjp+6iQS/Nou8eKucBazh7h/FCq/KHfGugMsl2DI8LTKNJcBVYwWCSob/K4cBfugaLX+rgjlRQ/CSrKvKX/EHFbuFlF7K/uLjFOGv8QRLN7O23NqBi4OVfHy6MsZ0BWoZcDpA8nn+F68FsD4bP04kIuE/bmp/4ocCDt4EqAjzOPlR37P/E+wzeZjH5SQby5MLDnX+TAohfd8AXZHkJrJGYjR8Q0ZFpfFABt1pVspyDEvq/YURhKAUBtAnUaH62InU3wbk9wQy0ZbVzySqt9PACd2ISZuHHw5m3uB/0Wp3nNOHMibZT3adwWrYQxu2Ih6/t3Nn0VtFL+ylUbfKcL8kN877kppqCRPKdslxcOkWLTdw/SeU2hxWUWrZnL3dgGYJ4XPJalcT5j0L7xnbCQtWk=
    - secure: Ii4uZNgKDgULFl+8AKlC+PAQyTPBHEeHXzUuDiDgD2NqCp9hANEgE/fKeh6M/FxprIBm3lIvPdDzvUkua6GkQntwQzuiyMz+0phRKE43b0Wzh/biokk+OJuRaqIla7VvZAKF15gx+vjs6rpeyJ1tSxm4WkzAOdZd9Tcr1eqgvbms4/+A0me6jhAp+n1OQJnk7bDw5bXpynsEeSKH5NAne//PWp2SYuH8chiIUjvqJN0ZQwYKIbk6F1wzypfs9Cs28ESMK3hzcKMGliBnwlYUiQWKCeeBdLwhiXXHyLifkiwpeoXJUSVhsgAq4IGBk1YEKVzpfDA+lvi3OmvD1LD0jMJVdPY4hq+2DQRPsa/qNIG+wZuzsw0FfRD0GqsdjXaHT7S8JVL6LfCFAmKafWnTCTbbooV+yzBZsX2tnoPctugaFwiZZ2OCXmEwnW3CqeUUMg4KZGiSB16QNGKFCXkmw4n6qBY4ylHAyiPeODOIUxFPKosF6Rh5nrtwd6l8fhasLPA2b1zYhdu8DRLygNHru1vAtJGg9LyauEdSkEpEeghlJiYDQYlUDFWthZa0IlxS/FfbaQfgCtRWBf6Gcz9Uvt+XvcjGxxjuFN2mcLdbMvgXrA8hI9rj44j65ObEok3CrhwC0mQTtLAZ/LvgTJBzYBoWEyn7jTnP5Dx7jWfyZ6U=
    - secure: neBQq9PtPkPRavcmGkSI0GMSzR/ASe3UhK+4fzQUDdlC3/mRCF0OeZbtK1YPU46g1PeU6tWfPRv23el0iUQF6O60xwLkSWYtze9bXSsAWXzyVtU0CZ7S9LCgPkBnmVTQOWOoY2i3MFE96i5vEGrn6xEwGS34xepbpemzYFd3TXNTwsj1KQBuPqqPKWUP6WBUItUtcBpQa8LS5aN/eLwh6qGafgniqa+8OTTGDZKgsnMyU7V2pnm2KyJD5NXK4EN8+gjxpnUx9fTuIrFaJBzDnV/WA4ysm5qzSM75EAIDyQbNtIqTEsa9NxXoT+nKbg/hBdvF5u323n9sUiRQx0QXoYUU/93D5or6ZYMbjZqDq9AlqgjPG/ceg9sD78bbLC+kZnXKkEi1l89yiD5DteBpWqWCBluKgL4nW+nVAexbdF3LV144vNQC1/I/0Dr+7Mb/yQ8zJKZWs/DrHAVIz8//3p+j6BCGMJLi2mvvKc1JEATmI6c7GIqbUp1/zSPui3y4DCHgYBJ06loahukCG9dDOJuzquEAgQnbfLZIatcc+YWdh3YBqsE8i6oCNG5Ed0FOVyqzBUP09P7sj8g8m/4pU6whLcKCD4grN6nTBDED27F5qIVuR6juey9nTARLU8QWfdWXcjpaeyTMkHYn3P3z8tj0aXPq81yJA3xDlSwpBgg=
