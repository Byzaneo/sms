language: java
jdk: openjdk11
sudo: required
services:
  - docker
cache:
  directories:
    - "$HOME/.m2/repository"

env:
  global:
    - secure: Az+EJQy9CvemqbC5WncL6Ez66qKDYJ8zUC7G4Yp+fJt6GwjyLLm+Tm5zrLOgnYwNDagUbngrsG2P1d6cyiJ9sGJreOiOuUw1uPw9VM1uYv2XQMCCzjNQBaoyoX7rZtrso2OM3PjCUwJipHdWmEfn2M6PfyzbxKNf40ZmRZCfv16oqTJ6KO/B9RHk70IpaqErVmP+Mrps3gfs+jzaLLVDcM30z2K+MScHX7iuATqU7zDTRM4dwM8kQ5+eN1lYoK4oPb1MBrlTpO+F38zgPfS3pvo9P24glPxkCzWG1pCcGAvGPGQDfE3Ip3IwyVjD4wirWzNqql7etwc1x9m2KGo5i2KFwZzhuln7isdo0mWbyR3BeFTcBDy3RSoFp15bfMAvD00Mzqm4+44eF9zm/uGOCLEHc/HsLF7kR9T9GZc4RKWPdicwxFIC2i4r+IbmjLpvs4t8S2QH/5AxzP5/nLRWtOUVbUbEDa9ssXC0JuL//d32uvdOjpFLm2As00jA5XGUyJQSzhSsYY5fuCnU4au07qTUB83j5DsO0CH6w9QHVYnSfDTlRCjH3w0OVY37bOXFxnMi6Vu5CyilArG4ggYYVw/qwkEl4xmyEuwCVDAKyHAdO2W+7d//Pp1fhN+UGLilU66KanJdHAjjCGZTjpWwsq6Ya6MP0Qk0LSBdBOCTsfI=
    - secure: d+naKFOi3wgSawqxI4KYQYSh2zqEZrJAInWqhY70h+EByp7HkehX6/zyxCoojXXjK5BzvtttN/xI4GW+yjQtyQASJZpYLUsyOY6bjOLg6zbF0tKBN37ruqoUBUBhhhs00jwBFk5UcqrVpm/Cdzhtzt2352BiqTtzKRnF4qZCfMLo2clgKCvNIguBbvhY0YZTeIKQlfJWP5bTBKEOXXa2wOq7HMuwJVJw6Izr+x739gwBFu7l2AVkO/6NOfo/7Malm2vryB1GM7tBuH2CmXIsL7Cah6YL1lXurz5/P/e3Dv/hNMWzcvkGsSRSM301APO9owqHVVXN1AtmRtt3/eDjxsuiOA4NKRnCNRkACGYkhFnq7qVyymIfHil27jkKUeN8+Av6EJq7Hz2qjYf50JmkdqwQC3W4HAtX+FBeQ8J3skFirwwjYCjpXE/uAUnbnIV7ELzYZ/o3SL/tVd7fH+hDC08GQq42u7XtzjzwTXyLMlRBn6t9Gq8aU5PfFl2WarX+daVEILNyHEms5fF+z5vlKog9khRmlQJLsIjUNpCDtCgcRr+RnSuaq90ZWgeSr0Gvk2Z1rSNo9xzdRSQkyXC3ZDGRHV12Orgm3vDtUwunQ8fevMnTHiRqF7+WP7DRDlUXKbGhJnS3K/3ndoBtCgo4JiU4MF9pmQHfQplo2CoKLdc=
    - secure: tpBNm5PQTRyCI8xpGUePwjRtSveilykJsjfXKfGfzgsU3EduLiXq0+WcazUznSyWuuXaLtRGIDG5Mg3+Z7hrWDuFyrSXp6G0s/wyAux3wrRK5wZNzlOxdhWj+aOgcQ+meXX/Gf/XhtmHKeM6afUUgLhh7OI0pyjmWVqVZ8kY2AkKRuQhdi1JJLeaxW6/PKuEIMtxdeQJcSTPSUnBK9MbJfYJUr+y37Vyi8nZix3F+BA90QO4VNuh3ZMw8ZaOAjYoeDCy4WVek+4YMd/fACFYMXXkLT5FhqCHVUVJcAjraeFw+amz3nitfpca3lpWHbm1ppAE4C19aHBXSNSZZE8AjsWhSPZj7c4TzI5C/aixien1k5Kb7cbUkt0swp8VbX+iQn6UdW72V7Z+YKka5feVUeHf2RlbUHnGARSG4FIrDs/mzSxRmz8HQirWceQnjm8qmjRCwOxu0wOaZVsQ7l5u3wYvj80ANKNXqkGcABxv/oW68ZY3BbQDns+X71vE3SDMqoTv0rPgWXGmGb8Qxea1JqPuIC3nZYZnxI2pbT+ieK6b8jNAuWTlu8x2aHRvLKswFf3nRbNlVFEvOe6Pzhggffa/pFLEs+UX0+fwsJyLRZUkno4hwA0souiGXdjchwWiu+Fk/9ByjpAksZYjfP1CdYGUrclh7Nijmg2BtiP8mmk=
    - secure: iXeQv0Xng3jH2ivPNs7kFeutdb6l4BecD+m14v/FxtxHsbwtsg1ZFcWLMhLs86K2dv8JtiX4gPdjFHcvAcNV5CcTDYedUZ66F/6e40YbExA3KhkFg1yb5sCiHZuIdjwsVrTtEG60llOtIawx9QDh62fpp9MgcQy0HwsN6yNal9liTTboDEe9Rin1pu4sRrGZL1dR6H3BQqFUUqZiEt+eR6tN9CjRSaDhmdtCu5zn+9VfLSFcU2bRnTPv+hFvCkGKyuEwfZO57wedIATVgv2+6kTwrsBsUVAZrd3eV+gOAIx8mBpTcgZkKTzddMNP8vzVYu7/+OZLhw+TgqQ0aFBMGgBEQcvaCBpHHjBSroMmWk6VALsM09dwzw3vg5+QRvtaT6J4L19vdJvGY594tsqGoTddTQuCkJcvuEhZlY1hz0YhxX6x+QFRlpbV74Fe/p9NpAELoiRQI+nujZphmtnvE//3GJL88oU3kHvpz/GC4AIYJKXPmd+oCI+M5JE38Yx1INacrYw6miPsTiIz9mwEKKQypoC04PJlfDK75Kcu6+cNXxZ+TX/qzcMAEJ/IuFkgd7pITBdZXOYHqObUl378VEFQjaIr7XyJmp+i4FM/gHn48/lg8fUgZYtBfGM9UAW+c5hw291autHswFcH6QUYXm9lr1kKvhuTYfDGu9YZUZw=
    - secure: mbmVIf2whnk9DS7Bs5Lrq+sDfn7Cezf2Vpdeiy4zUnBqksN/6OqOoqNtpu7yGfDQQhGkjFRkeOad9hhPEewnknyALQlqhy+1e7ouhTHagnlErFS7ulpR/LJTmSK0pocKSxB6YsvoA+0Y4xfLf1bM4hgD1I3lf8vQZig0yb/LasjMSVK7aoaZWEt0ZDrEAvtnHNhpYCKfBLqTsjIbEYZHf01JWFALz/h6KYqpMGg1i4h8fK85ok3HrEDD9JiTbBYZmkn1XSbcWsp0BU2KnEsSv6khd+ZnsPF2w7AsbBpM2ZQw0WEzZqcxTdj9Km3rY91i4arpHMsX4sFHo3DTfyfP1XX8/QVMAlNdereOITYqmTS9Oon/XkMXDuvwv2EVVlfoIHYdc90DNLeStojOc5FKoZdDsJNiktFm3hJ122v2KVKA7hnJJCkcAs8Jg739eBJmzFsG8xD2nPkcqh2Lu3oWRSh6eetKEwNDWjirk6hFKvO3wjWBvXmfN5eh0pzgG22YNQ4Ahkufg7CVh8JGXHAh5L2giNtO0lvfABpTIGz4l7YdeJY4zSO9LFDkPUOnEPBrm2rBoGsOsqErzUq2p0sv1VsdyoRk3v4PMYCxrEZZRI+zHrCbQtDpVdrTMpCDXmwdn3xu9Ix6Gg/Hds9n/5x1O7rwZY0tyEa+04Rg7+C+PMg=
    - secure: aAB/CFRD0zcLoFv25udzzto9bqIJ9ccZ5mZILGRQFirk5G6UHT2G3duepFAX4pDg2kkbKtq2SsWSkfVTdMbBTGTk7ErZfwxcOY9Bc8sK+4qxM7zaIAbwxQ1sEFS1Nlrw5pQfJdl7Cbi8IzHRM2AahnraCrFgFGiKiV/3xBYhtR1ilktKnLS7hG7ieSIVpgORzngugdNcc8xjTn2R7sB6lHqdl0i10MiLNMV7lBI1SpqApFNAo0Usi+NmNhn97Yv4huQyoVLIGZvl00B5dOyedptXPWaquHyntRClnGRgLKkVQZcGrymS5vYgb7wRGnG7+lLYrISMa2FIzge4BRkEGgPBPYbBv1oV5vE5Yp3hKb9tUgeLGQF2lpjomAXFLfEjLxhGdd50pt+WIxAxDg67uREU3rN7VdF9z0Mm51cK9E+AuPEJ4IM7xy8hLx7qVqphFDyDqfe/SiYoxQIFuwUCpF94Gdvb86CCIqXFEEeAfdpwZrTHrqWgRIqmZPlh7TxLH1cgQmi6mxvyYbe1AzBx0J8qN6gWNfqNKpCd+Sz3oStT6fQFDfcXGmcB0bT+fQM0dSyfTZxe9lPKfkA2Plzcos6jU0mFKm0OAirvCP5rme1bx4Is2aNj8giSeu5bBv1FAtX8ttdT/FFx7BDOgd724TCHc7bBkmoAROTQ5egmo+Q=
    - TAG=latest
    - IMAGE_NAME=repository.byzaneo.com/sms
    - PROJECT_NAME=sms

before_install:
  - git clone https://sources.byzaneo.com/scm/one/travis.git target
  - chmod +x ./target/*.sh
install: true

script:
  - ./target/travis-script.sh
after_success:
  - ./target/travis-success.sh

before_deploy:
  - ./target/travis-pre-deploy.sh
deploy:
  provider: script
  script: "./target/travis-deploy.sh"
  on:
    branch: master
