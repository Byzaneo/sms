sudo: required
language: java
jdk: oraclejdk10
services:
- docker
cache:
  directories:
  - "$HOME/.m2/repository"
before_install:
- git clone https://sources.byzaneo.com/scm/one/travis.git target
install:
- env
- mvn package -U -B -P prod,coverage --settings target/maven/settings.xml
after_success:
- bash <(curl -s https://codecov.io/bash)
- docker login -u $BYZANEO_USERNAME -p $BYZANEO_PASSWORD repository.byzaneo.com
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- export IMAGE_NAME=repository.byzaneo.com/sms
- docker build -t $IMAGE_NAME:$COMMIT .
- docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:$TAG
- docker push $IMAGE_NAME
env:
  global:
  - secure: Az+EJQy9CvemqbC5WncL6Ez66qKDYJ8zUC7G4Yp+fJt6GwjyLLm+Tm5zrLOgnYwNDagUbngrsG2P1d6cyiJ9sGJreOiOuUw1uPw9VM1uYv2XQMCCzjNQBaoyoX7rZtrso2OM3PjCUwJipHdWmEfn2M6PfyzbxKNf40ZmRZCfv16oqTJ6KO/B9RHk70IpaqErVmP+Mrps3gfs+jzaLLVDcM30z2K+MScHX7iuATqU7zDTRM4dwM8kQ5+eN1lYoK4oPb1MBrlTpO+F38zgPfS3pvo9P24glPxkCzWG1pCcGAvGPGQDfE3Ip3IwyVjD4wirWzNqql7etwc1x9m2KGo5i2KFwZzhuln7isdo0mWbyR3BeFTcBDy3RSoFp15bfMAvD00Mzqm4+44eF9zm/uGOCLEHc/HsLF7kR9T9GZc4RKWPdicwxFIC2i4r+IbmjLpvs4t8S2QH/5AxzP5/nLRWtOUVbUbEDa9ssXC0JuL//d32uvdOjpFLm2As00jA5XGUyJQSzhSsYY5fuCnU4au07qTUB83j5DsO0CH6w9QHVYnSfDTlRCjH3w0OVY37bOXFxnMi6Vu5CyilArG4ggYYVw/qwkEl4xmyEuwCVDAKyHAdO2W+7d//Pp1fhN+UGLilU66KanJdHAjjCGZTjpWwsq6Ya6MP0Qk0LSBdBOCTsfI=
  - secure: d+naKFOi3wgSawqxI4KYQYSh2zqEZrJAInWqhY70h+EByp7HkehX6/zyxCoojXXjK5BzvtttN/xI4GW+yjQtyQASJZpYLUsyOY6bjOLg6zbF0tKBN37ruqoUBUBhhhs00jwBFk5UcqrVpm/Cdzhtzt2352BiqTtzKRnF4qZCfMLo2clgKCvNIguBbvhY0YZTeIKQlfJWP5bTBKEOXXa2wOq7HMuwJVJw6Izr+x739gwBFu7l2AVkO/6NOfo/7Malm2vryB1GM7tBuH2CmXIsL7Cah6YL1lXurz5/P/e3Dv/hNMWzcvkGsSRSM301APO9owqHVVXN1AtmRtt3/eDjxsuiOA4NKRnCNRkACGYkhFnq7qVyymIfHil27jkKUeN8+Av6EJq7Hz2qjYf50JmkdqwQC3W4HAtX+FBeQ8J3skFirwwjYCjpXE/uAUnbnIV7ELzYZ/o3SL/tVd7fH+hDC08GQq42u7XtzjzwTXyLMlRBn6t9Gq8aU5PfFl2WarX+daVEILNyHEms5fF+z5vlKog9khRmlQJLsIjUNpCDtCgcRr+RnSuaq90ZWgeSr0Gvk2Z1rSNo9xzdRSQkyXC3ZDGRHV12Orgm3vDtUwunQ8fevMnTHiRqF7+WP7DRDlUXKbGhJnS3K/3ndoBtCgo4JiU4MF9pmQHfQplo2CoKLdc=
  - secure: tpBNm5PQTRyCI8xpGUePwjRtSveilykJsjfXKfGfzgsU3EduLiXq0+WcazUznSyWuuXaLtRGIDG5Mg3+Z7hrWDuFyrSXp6G0s/wyAux3wrRK5wZNzlOxdhWj+aOgcQ+meXX/Gf/XhtmHKeM6afUUgLhh7OI0pyjmWVqVZ8kY2AkKRuQhdi1JJLeaxW6/PKuEIMtxdeQJcSTPSUnBK9MbJfYJUr+y37Vyi8nZix3F+BA90QO4VNuh3ZMw8ZaOAjYoeDCy4WVek+4YMd/fACFYMXXkLT5FhqCHVUVJcAjraeFw+amz3nitfpca3lpWHbm1ppAE4C19aHBXSNSZZE8AjsWhSPZj7c4TzI5C/aixien1k5Kb7cbUkt0swp8VbX+iQn6UdW72V7Z+YKka5feVUeHf2RlbUHnGARSG4FIrDs/mzSxRmz8HQirWceQnjm8qmjRCwOxu0wOaZVsQ7l5u3wYvj80ANKNXqkGcABxv/oW68ZY3BbQDns+X71vE3SDMqoTv0rPgWXGmGb8Qxea1JqPuIC3nZYZnxI2pbT+ieK6b8jNAuWTlu8x2aHRvLKswFf3nRbNlVFEvOe6Pzhggffa/pFLEs+UX0+fwsJyLRZUkno4hwA0souiGXdjchwWiu+Fk/9ByjpAksZYjfP1CdYGUrclh7Nijmg2BtiP8mmk=
  - secure: QSoXS2u5lMwDIQ58v35jugoW3+osRXb6r5LVNLI3AuBY24CW0GNxmRebzK16mE6Zy2QeHCaHieXt1CB7m5dARBee6TqzUpeufkbYSs5P6LjYvQgwR4ZCN6JHVTwtHapsLbWnIUzU0yOiInnRpjAHtctdpmVwG6F5J3MJOpJjqMdJxoMMbmSDK3oimE5e9ZfTGHNKZ1Ak0VoTfsXfI9S9nEakiicwFQKOTCfHOVZ7O6RNbK4D0eUCJ44wNuQ0CvN0Xg5yblW85GcguLNK4DP3vNQPH5TXrtVXa+wu1ve28Ps+iDjzw5GjX5ZknaCNbfbvRlGM4Dj3TDbgdCiHQ95KGw1HJ2u2nCIUO5KjCC947sguf9ZzKWVuI755vwhXMifYe1cwH97kw8lh6Pl/3UL8lSZn+le9yM4nYGzWRCGen66OaYxAVEw3B8o5Ba2vrSWV2OCBqoe9msnLgA/xFpz94q3ovgSMDzCHQkieNLxxOJ4v2KvUu+mwi1EqWxLbClu8GdP/keUYG5PyKa9uPcRbmlX4Nc8mEPE/LFuFNDj1tahfTjDWPHkOSLlH0NQDRpkrjxg7X2G9KLiPFfKGfj5Ggybm5wI8TXrevZx+sxF2a6bZWwKLzhDzG7S+HE5muvimTbpbAPU7YxfDdAhC3LpmSgi6HurvXBvcyaMH6/yFfig=
  - secure: RG9B2zAWCl3L/VU9Y/EyKta7jejpVsrfJFqGYsrMYnLYN1js7zW+TNnOQtbij7yfT+CIfpfUnz2sRsd6Hlk6gtO4R3xATNjyTB+2ebQCQTRnpglzGldQFKYGAZFWGJXRRhN17gMRayyD218sqOR1KD0lrU6JDnfDThrUQqXIxC+NL2pgkxGaIP+btS/xZFArKcnRP4nEz5Hl9azw8PFuuBdnANbEL7cDSynbcGTtqbowJjjdoPuPiQmzJWjMzAoFtZdYCnuATzNFFLm1ipaVrNti1fhS79HFPoyurvVE5bv8ir+pBnC+o8j7C7jYFtK5zQY9MsTl1xPu0vwZrl+i89NJSOHjWMHWnxe2bj59HtiXFfKT/ZgvjP8Ru0uvAgOCTMgh0ftEkmgGoHOglvqD1EvpigYENGPhdeo8NkJXcQFvQcWTRuXVNNAgOQcUoZbpEvc9nt2Q8BAMIRaFoG3KY0NUGUDvBpkpE+8ggnwfEjhjfQI7cL269ZYTn1aGBWvIFWIC2kWZBt8n4PLC7JbKcp5M+oCg7BWZAN1SBdL3TETT+4xeOTZCERzbwraoUQ1PGNzFWTfMkNwp22GPMDPQu0Ep4T4S5WBlhYkx6/KNTO12+6tYvyFIwqyrRafzZGVQ8dHqyb86MyozxNRC5wnnuQpQVoJdlb9xUBLmjeUNPLY=
